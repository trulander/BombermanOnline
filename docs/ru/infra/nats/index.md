# NATS
[![English](https://img.shields.io/badge/lang-English-blue.svg)](../../../en/infra/nats/index.md)

## Назначение

**NATS** — это высокопроизводительная **система обмена сообщениями (message bus)** для асинхронного взаимодействия между микросервисами.

-   **`game-service`** публикует события об изменении состояния игры.
-   **`ai-service`** подписывается на эти события и отправляет команды управления AI.
-   **`game-allocator-service`** координирует распределение игровых сессий.

## Конфигурация из docker-compose.yml

```yaml
services:
  nats:
    image: nats:2.10
    ports:
      - "4222:4222"  # Клиентский порт
      - "8222:8222"  # Порт для мониторинга
    volumes:
      - nats_data:/data
```

- **`image`**: `nats:2.10`
- **`ports`**: `4222` для клиентов, `8222` для мониторинга.
- **`volumes`**: `nats_data` для хранения данных (например, для JetStream).

## Взаимодействие с другими сервисами

-   **Микросервисы**: Сервисы, которым требуется асинхронное общение, подключаются к NATS по адресу `nats:4222`.
-   **Prometheus NATS Exporter**: Экспортер подключается к мониторинговому порту `8222` для сбора метрик и их передачи в Prometheus.
