# Руководство пользователя (Детальный обзор)

Этот документ — ваш гид по веб-интерфейсу Bomberman Online. Здесь вы найдете подробное описание всех функций: от создания аккаунта и входа в игру до продвинутых возможностей, таких как редактор карт и управление игровыми сессиями.

## 1. Аутентификация и управление аккаунтом

Для доступа к большинству функций требуется учетная запись.

### 1.1. Регистрация (`/account/register`)

1.  **Переход на страницу:** Нажмите кнопку "Регистрация" на главной странице.
2.  **Заполнение формы:** Вам будет представлена форма со следующими полями:
    *   **Имя пользователя:** Ваш уникальный псевдоним в игре (от 3 до 30 символов). Это поле обязательно.
    *   **Email:** Ваш действующий адрес электронной почты. Используется для входа, верификации и восстановления пароля. Поле обязательно.
    *   **Полное имя (опционально):** Ваше настоящее имя. Это поле необязательно.
    *   **Пароль:** Надежный пароль (минимум 8 символов). Поле обязательно.
    *   **Подтверждение пароля:** Повторите пароль. Поле должно совпадать с полем "Пароль".
3.  **Отправка:** После нажатия кнопки "Зарегистрироваться", система проверит данные. В случае успеха будет создан ваш аккаунт, и вы увидите сообщение о необходимости проверить почту для завершения регистрации.

### 1.2. Верификация Email (`/account/verify-email`)

После регистрации необходимо подтвердить ваш email.

1.  **Проверьте почту:** В вашем почтовом ящике найдите письмо от Bomberman Online.
2.  **Перейдите по ссылке:** В письме будет уникальная ссылка. Нажмите на нее.
3.  **Завершение:** Вы будете перенаправлены на страницу подтверждения, где увидите сообщение об успешной активации аккаунта. Теперь вы можете войти в игру.

### 1.3. Вход в систему (`/account/login`)

1.  **Переход на страницу:** Нажмите кнопку "Войти".
2.  **Ввод данных:** Введите ваше **имя пользователя** и пароль.
3.  **Запомнить меня:** Если вы хотите, чтобы система запомнила вас, поставьте галочку в этом поле. Ваш сеанс будет сохранен в `localStorage`.
4.  **Вход:** Нажмите кнопку "Войти". При успешной авторизации вы будете перенаправлены в личный кабинет (`/account/dashboard`). В случае ошибки (неверный пароль или имя пользователя) вы увидите соответствующее уведомление.

### 1.4. Сброс пароля (`/account/reset-password`)

1.  **Запрос на сброс:** На странице входа нажмите на ссылку "Забыли пароль?".
2.  **Введите Email:** Укажите email, который вы использовали при регистрации.
3.  **Проверьте почту:** Вам придет письмо со ссылкой на страницу создания нового пароля.
4.  **Создание нового пароля (`/account/confirm-reset-password`):** Перейдите по ссылке из письма. Введите новый пароль и подтвердите его. После сохранения вы сможете войти в систему с новым паролем.

## 2. Личный кабинет (Dashboard) (`/account/dashboard`)

Это ваша домашняя страница после входа в систему.

*   **Карточка профиля:** Отображает ваш аватар, имя пользователя, email и роль. Есть кнопка для перехода на страницу редактирования профиля.
*   **Игровые возможности:** Набор карточек для быстрого доступа к основным функциям:
    *   **Начать игру:** Перенаправляет на страницу создания новой игры (`/account/games/create`).
    *   **Список игр:** Переход к списку всех доступных игровых комнат (`/account/games`).
    *   **Редактор карт:** Переход к мощному редактору карт (`/account/maps/editor`).
    *   **Статистика:** Переход на страницу с вашей игровой статистикой (`/account/stats`).

## 3. Игровой процесс

### 3.1. Создание игры (`/account/games/create`)

1.  **Настройки:**
    *   **Режим игры:** Выпадающий список для выбора режима (например, `Кампания`, `Все против всех`).
    *   **Максимум игроков:** Числовое поле для указания лимита игроков (от 2 до 8).
    *   **Шаблон карты (опционально):** Выпадающий список со всеми созданными в редакторе картами. Если не выбрано, будет использована карта по умолчанию.
2.  **Создание:** Нажатие кнопки "Создать игру" отправляет запрос на `WebAPI Service` и, в случае успеха, перенаправляет вас на игровой экран (`/account/game/:gameId`).

### 3.2. Игровой экран (`/account/game/:gameId`)

Это основное окно, где происходит вся игра.

*   **Игровое поле (`GameCanvas`):** Центральная часть экрана, где в реальном времени отрисовывается игра.
*   **Плавная камера:** Камера плавно следует за вашим персонажем, начиная движение только когда персонаж выходит за пределы центральной "мертвой зоны".
*   **Информационная панель (вверху):** Отображает ID игры, уровень и статус (Ожидание, Активна, Пауза, Завершена).
*   **Подсказка по управлению:** Под игровым полем всегда отображается напоминание: "Используйте клавиши WASD или стрелки для перемещения, пробел для установки бомбы".

### 3.3. Управление и горячие клавиши

Управление реализовано в `src/services/InputHandler.ts`.

| Клавиша(и) | Действие |
| :--- | :--- |
| **`W`** / **`↑`** (стрелка вверх) | Движение вверх |
| **`S`** / **`↓`** (стрелка вниз) | Движение вниз |
| **`A`** / **`←`** (стрелка влево) | Движение влево |
| **`D`** / **`→`** (стрелка вправо) | Движение вправо |
| **`Пробел`** | Установить основное оружие (бомбу) |
| **`R`** | Перезапустить игру (если доступно) |

## 4. Управление игрой (`/account/games/:gameId/manage`)

Это не отдельная страница, а модальное окно, которое открывается поверх игрового экрана по клику на иконку шестеренки в шапке.

### 4.1. Ваше участие в игре

*   **Если вы не в игре:**
    *   Вы можете выбрать **тип юнита** (`Bomberman` или `Tank`).
    *   Нажать кнопку **"Присоединиться к игре"**.
*   **Если вы уже в игре:**
    *   Вы видите свой текущий тип юнита.
    *   Вы можете **сменить тип юнита** (это пересоздаст вашего персонажа в лобби).
    *   Вы можете нажать **"Покинуть игру"**.

### 4.2. Общая информация и действия

*   **Информация:** Отображается статус, режим, количество игроков, уровень и т.д.
*   **Выбор карты:** Можно изменить шаблон карты для игры, если она еще не началась.
*   **Действия с игрой:**
    *   **Начать игру:** Доступно, если в лобби есть хотя бы один игрок.
    *   **Приостановить/Возобновить игру:** Управляет паузой во время матча.
    *   **Удалить игру:** Полностью удаляет сессию.

### 4.3. Управление игроками и командами

*   **Список игроков:** Отображает всех игроков в лобби, их статус, жизни и координаты.
*   **Добавить игрока:** Администратор может вручную добавить игрока по его ID.
*   **Удалить игрока:** Администратор может кикнуть игрока из лобби.
*   **Управление командами (для режима `Capture The Flag`):**
    *   Создание и удаление команд.
    *   Автоматическое распределение игроков.
    *   Ручное перемещение игроков между командами.

## 5. Редактор карт (`/account/maps/editor`)

Мощный инструмент для создания и управления игровыми картами.

### 5.1. Шаблоны карт

*   **Создание:**
    1.  Нажмите "Создать новый шаблон карты".
    2.  В диалоговом окне задайте **имя, описание, размеры (ширина/высота), сложность (1-10) и макс. игроков (1-8)**.
    3.  **Интерактивный редактор:**
        *   **Палитра:** Выберите тип ячейки для рисования (`Сплошная стена`, `Разрушаемый блок`, `Спавн игрока` и т.д.).
        *   **Сетка:** Зажмите левую кнопку мыши и ведите по сетке, чтобы "рисовать" выбранным типом блока.
    4.  Нажмите "Создать", чтобы сохранить карту.
*   **Управление:** Существующие шаблоны можно просматривать, редактировать (откроется тот же редактор с уже заполненными данными) или удалять.

### 5.2. Группы и Цепочки карт

*   **Группы карт:** Позволяют объединять карты по какому-либо признаку (например, "Зимние карты", "Карты для дуэлей").
*   **Цепочки карт:** Позволяют создавать последовательности карт для режима кампании. При создании цепочки вы выбираете несколько шаблонов из списка, и они будут загружаться в указанном порядке по мере прохождения.

## 6. Профиль и Статистика

### 6.1. Профиль (`/account/profile`)

*   **Просмотр:** Отображается ваш аватар, имя пользователя, дата регистрации, email и статус верификации.
*   **Редактирование:** Вы можете изменить свое **имя пользователя**, **полное имя** и **URL аватара**.

### 6.2. Статистика (`/account/stats`)

На этой странице (в данный момент с демонстрационными данными) будет отображаться ваша подробная игровая статистика, включая количество побед, поражений, процент побед, общий счет и другие игровые достижения.
